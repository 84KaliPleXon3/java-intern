{
	"suites": [
		"_tests/tests/unit/**/!(Benchmark*).js"
	],
	"benchmark": false,
	"functionalSuites": "_tests/tests/functional/**/*.js",
	"reporters": [ { "name": "runner", "options": { "hideSkipped": true } } ],
	"browserLoader": {
		"script": "systemjs",
		"config": {
			"baseURL": "/node_modules",
			"paths": {
				"src": "/_build/src",
				"_tests": "/_tests"
			},
			"map": {
				"url": "@node/url",
				"fs": "@node/fs",
				"path": "@node/path",
				"jszip": "@node/jszip",
				"http": "@node/http",
				"https": "@node/http",
				"zlib": "@node/zlib"
			},
			"packageConfigPaths": [
				"/node_modules/*/package.json",
				"/node_modules/@dojo/*/package.json"
			],
			"packages": {
				"src": { "defaultExtension": "js" },
				/* Force benchmark to be handled as CJS instead of AMD */
				"benchmark": { "format": "cjs" },
				/* Some tests are incorrectly detected as 'global' */
				"_tests": { "format": "cjs" }
			}
		}
	},
	"internPath": "_tests/src",
	"filterErrorStack": true,
	"nodePlugins": [
		"_tests/tests/nodeMocking.js"
	],
	"browserPlugins": [
		"_tests/tests/pre.js",
		"_tests/tests/browserMocking.js"
	],
	"excludeInstrumentation": "(?:node_modules|_tests)",
	"maxConcurrency": 2,
	"capabilities": {
		"idle-timeout": 60,
		"fixSessionCapabilities": "no-detect"
	},

	"configs": {
		/* For running all unit tests (including benchmarks) */
		"coverage": {
			"benchmark": true,
			"suites": [
				"_tests/tests/unit/**/*.js"
			],
			"reporters+": [
				{
					"name": "htmlcoverage",
					"options": { "sources": "_build/src/lib/**/*.js" }
				}
			]
		},
		/* For running local selenium tests */
		"wd": {
			"tunnel": "selenium",
			"environments": "chrome"
		},
		/* For running tests on Travis */
		"ci": {
			"tunnel": "browserstack",
			"suites": [
				"_tests/tests/unit/**/*.js",
				"_tests/tests/benchmark/example.js"
			],
			"environments": [
				{ "browser": "internet explorer", "version": [ "10", "11" ] },
				{ "browser": "firefox", "version": [ "33", "latest" ], "platform": [ "WINDOWS", "MAC" ] },
				{ "browser": "chrome", "version": [ "38", "latest" ], "platform": [ "WINDOWS", "MAC" ] },
				{ "browser": "safari", "version": [ "9", "10" ] }
			]
		},
		/* For trying out the browser runner */
		"browser": {
			"suites": [
				"_tests/tests/unit/lib/Environment.js",
				"_tests/tests/unit/lib/BenchmarkTest.js"
			]
		},
		/* For running CI tests on Sauce Labs */
		"sauce": {
			"tunnel": "saucelabs",
			"suites": [
				"_tests/tests/unit/**/*.js",
				"_tests/tests/benchmark/example.js"
			],
			"environments": [
				{ "browser": "internet explorer", "version": [ "10", "11" ] },
				{ "browser": "firefox", "version": [ "33", "latest" ], "platform": [ "Windows 10", "OS X 10.12" ] },
				{ "browser": "chrome", "version": [ "38", "latest" ], "platform": [ "Windows 10", "OS X 10.12" ] },
				{ "browser": "safari", "version": [ "9", "10" ] }
			]
		}
	}
}
